> 2019-08-19 : 최초 생성  
> 2019-10-02 : 테이블 변경됨, 로컬에 적용  
> 2019-10-10 : 대사기능 상용 적용, 상태 비교 로직 수정(상용미적용), job 이름 변경(상용미적용)

RDS 대사
========

### 요청사항

-	비교 Task 분리
	-	기존 (1,2,3) -> (1, [2, 3])
-	코드 정의
	-	현재 샘플에 있는 text코드 외 오류처리

### 확인사항

-	~~GetRdsFailTask에는 (쿠폰금액, 쿠폰발행일, 쿠폰사용일) 없음~~
	-	~~쿠폰금액은 사용금액으로 대체하고 나머지는 입력하지 않음~~
-	~~FP_CPN_USE_CMPR_INFO 테이블 파일명 null 입력되고 있음~~
-	~~테이블 변경사항 있음 확인후 로컬 DB에도 적용~~
	-	~~취소일시 필드가 추가되었지만 사용하지 않음~~
-	미입력 필드 확인
	-	FP_CPN_USE_CMPR_INFO
		-	~~rds_file_nm, gifti_show_file_nm, rds_ttl_deal_cnt, rds_ttl_use_amt, gshow_ttl_deal_cnt, gshow_ttl_use_amt~~, no_acr_cnt, no_acr_amt
	-	FP_GIFTI_SHOW_CMPR_FILE_INFO
		-	cpn_cncl_dt : 취소일
			-	취소일이 원본 엑셀 데이타에 따로 없음
			-	취소건의 발행일을 취소일로 할지 결정해야됨
	-	FP_CPN_USE_CMPR_FAIL
		-	cpn_cncl_dt : 취소일
		-	위와 같음  
-	~~취소 관련 중복되는 레코드 처리 방안~~
	-	~~엑셀파일의 의도대로 처리~~
-	월대사 결과 테이블에 취소 건수 없음
	-	필요하면 추후에 추가
-	대사파일 1열에 제목을 놔둘지 제거할지 결정
-	KOS 대사파일 중간 합산 금액은 수동으로 삭제할지 결정
-	~~KOS 대사 한열에 핀번호가 여러개 나온 건은 첫번째 건만 금액 반영~~
-	~~취소관련건의 경우 pin_no 가 중복으로 나오는데(정상2건 취소1건 or 정상1건 취소1건) 기존 소스에서 Set 객체를 사용하여 비교하였기때문에 정상건 금액이 합산되지 않음~~
	-	~~List 객체 사용하도록 수정함~~
	-	~~1.(정상1건), 2.(정상1건, 취소1건), 3.(정상2건, 취소1건)~~
	-	~~1, 3은 같은 쿠폰 사용이지만 로그상으로 다름~~
	-	~~2번은 쿠폰 취소~~
	-	로컬에 적용했지만 아직 커밋하지 않음

### 테이블

| 테이블                       | 설명                                 |
|------------------------------|--------------------------------------|
| FP_RDS_CMPR_FILE_INFO        | 패밀리포인트 KOS-RDS 대사 파일 정보  |
| FP_GIFTI_SHOW_CMPR_FILE_INFO | 패밀리포인트 기프티쇼 대사 파일 정보 |
| FP_CPN_USE_CMPR_INFO         | 패밀리포인트 쿠폰 사용 대사 마스터   |
| FP_CPN_USE_CMPR_FAIL         | 패밀리포인트 쿠폰 사용 대사 실패건   |

### 시스템 파라미터

| 파라미터코드        | local                         | tb                         | real      |
|---------------------|-------------------------------|----------------------------|-----------|
| KOSRDS_CMPR_TGT_DIR | C:\\PHDev\\ledgerTest\\kosrds | /home/jboss/kosrds-compare | tb와 같음 |
| MHOWS_CMPR_TGT_DIR  | C:\\PHDev\\ledgerTest\\mhows  | /home/jboss/mhows-compare  | tb와 같음 |

### 시스템 메시지

|              | 그룹 |      | 메시지                        |
|--------------|------|------|-------------------------------|
| CM_INFO_192  | 대사 | I192 | 핀번호가 KOS-RDS에만 존재     |
| CM_INFO_193  | 대사 | I193 | 핀번호가 KTMHOWS에만 존재     |
| CM_INFO_194  | 대사 | I194 | 쿠폰상태 불일치               |
| CM_ERROR_196 | 대사 | F196 | KOS-MHOWS 대사 쿠폰 상태 예외 |

BZ => CM F188 => F196

### 공통코드

| 구분코드    | 상세코드           | 그룹   | 상세코드명              |
|-------------|--------------------|--------|-------------------------|
| BTCH_JOB_CD | KosRdsToKtMhowsJob | 어드민 | KOS-RDS, ktmhows 월대사 |

### 추가사항

-	~~불일치건수 구하는 로직 변경~~
	-	~~상용 미적용 상태~~
-	~~배치작업이력에서 조회시 작업명 코드가 달라서 검색이 안되는 문제있음~~
	-	~~배치 실행시 작업명 코드 정확히 입력되게 수정~~
	-	~~원래 작업명 FamilyPointToPHubJob을 KosRdsToKtMhowsJob로 변경하면서 문제 발생~~
		-	~~로컬에서 수정하고 테스트 완료함~~
-	~~파일경로 이상함 확인 필요~~
